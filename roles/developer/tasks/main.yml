# You may need to install this to get the snap role:
# ansible-galaxy collection install community.general

---
- name: Install packages
  ansible.builtin.apt:
    pkg:
    - git
    - vim
    - ruby
    - tmux
    - zsh
    - wget
    - snapd
  when: ansible_facts['distribution'] != "Pop!_OS"

- name: Install oh-my-zsh
  ansible.builtin.command: $(wget -O- https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)
  args:
    creates: /home/jeff/.zshrc
  
- name: Add the user 'jeff'
  ansible.builtin.user:
    name: jeff
    shell: /usr/bin/zsh
    # groups: admins,developers

- name: Install snaps
  community.general.snap:
    name:
      - rubymine
    classic: true

- name: git checkout distrobox
  ansible.builtin.git:
    repo: https://github.com/89luca89/distrobox.git
    dest: /home/jeff/projects/gits/distrobox

- name: Install distrobox from git
  ansible.builtin.shell: ./install
  args:
    chdir: /home/jeff/projects/gits/distrobox
    creates: /usr/local/bin/distrobox
